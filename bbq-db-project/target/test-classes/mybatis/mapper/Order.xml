<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Order" >
	<resultMap id="BaseResultMap" type="Order" >
		<id column="ORDER_ID" property="orderId" jdbcType="INTEGER" />
		<result column="USER_ID" property="user" jdbcType="INTEGER" />
		<result column="ADDRESS_ID" property="address" jdbcType="INTEGER" />
		<result column="STATUS" property="status" jdbcType="VARCHAR" />
		<result column="ORDER_TIME" property="orderTime" jdbcType="DATE" />
	</resultMap>
	
	<sql id="Base_Column_List" >
		ORDER_ID, USER_ID, ADDRESS_ID, STATUS, ORDER_TIME
	</sql>
	
	<insert id="insert" parameterType="Order">
		insert into Order (ORDER_ID, USER_ID, ADDRESS_ID, STATUS, ORDER_TIME)
		values (#{orderId,jdbcType=INTEGER},
		#{user.userId,jdbcType=INTEGER},
		#{address.addressId,jdbcType=INTEGER},
		#{status,jdbcType=VARCHAR}, 
		#{orderTime,jdbcType=DATE})
	</insert>
	
	<select id="select_all" resultMap="BaseResultMap">
		select <include refid="Base_Column_List" /> from Order
	</select>
	
	<select id="getOrderById" parameterType="java.util.Map" resultMap="BaseResultMap">
		select <include refid="Base_Column_List" /> from Order where order_id = #{orderId}
	</select>
	
	<select id="getOrderByUserID" parameterType="java.util.Map" resultMap="BaseResultMap">
		select <include refid="Base_Column_List" /> from Order where user_id = #{user.userId}
	</select>
	
	<select id="update" parameterType="java.util.Map">
		update Order set STATUS=#{status,jdbcType=VARCHAR} where ORDER_ID=#{orderId,jdbcType=INTEGER}
	</select>
	
</mapper>